
# FSP Cup 2025 ‚Äî Backend Monorepo

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è backend‚Äë–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π –Ω–∞ NestJS, PostgreSQL –∏ Docker.

---

## üì¶ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

* **api-gateway** ‚Äî –ø—É–±–ª–∏—á–Ω—ã–π REST API –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä (–æ–±—â–µ–Ω–∏–µ —Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ –ø–æ RPC)
* **users-service** ‚Äî –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ —Ä–æ–ª—è–º–∏
* **core-service** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å (—Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è, –∫–æ–º–∞–Ω–¥—ã –∏ –¥—Ä. –±–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∞)
* **db** ‚Äî PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–û–±—â–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ –ø–æ TCP (NestJS microservices). –í—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Docker Compose.

---

## ‚öôÔ∏è –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. **–°–∫–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.**
2. **–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:**

```env
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=fsptest
DB_HOST=db
DB_PORT=5432
DB_USER=postgres
DB_PASS=postgres
DB_NAME=fsptest
```

---

## üöÄ –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Hot Reload)

1. –£–±–µ–¥–∏—Å—å, —á—Ç–æ Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.
2. –ó–∞–ø—É—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—É:

```bash
docker-compose -f docker-compose.dev.yml up --build
```

* –í—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã (`users-service`, `core-service`, `api-gateway`) —Å—Ç–∞—Ä—Ç—É—é—Ç –≤ —Ä–µ–∂–∏–º–µ **hot reload** (`nest start <project> --watch`).
* –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –≤ –ø–∞–ø–∫–∞—Ö `apps/*/src` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é—Ç —Å–µ—Ä–≤–∏—Å.

**–ü–æ–ª–µ–∑–Ω—ã–µ –∞–¥—Ä–µ—Å–∞:**

* `http://localhost:3000/api/users` ‚Äî –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ gateway
* `http://localhost:4001/` ‚Äî users-service –Ω–∞–ø—Ä—è–º—É—é
* `http://localhost:4002/` ‚Äî core-service –Ω–∞–ø—Ä—è–º—É—é
* Swagger (–µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω): `http://localhost:3000/api`

---

## üè≠ –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

1. –°–æ–±–µ—Ä–∏ –∏ –∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å—ã –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
docker-compose up --build
```

* –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è production-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –±–µ–∑ hot reload.

---

## üß© –ö—Ä–∞—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
apps/
  api-gateway/
  core-service/
  users-service/
.env
docker-compose.yml
docker-compose.dev.yml
webpack-hmr.config.js
```

---

## üß± –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

* [NestJS](https://docs.nestjs.com/)
* [PostgreSQL](https://www.postgresql.org/)
* [Docker Compose](https://docs.docker.com/)
* [Yarn Workspaces](https://classic.yarnpkg.com/en/docs/workspaces/)

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
docker-compose down -v         # —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ volume –±–∞–∑—ã
docker-compose logs -f         # —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker exec -it <container> sh # –≤–æ–π—Ç–∏ –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, users-service-dev)
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –≤ –µ–¥–∏–Ω–æ–π —Å—Ä–µ–¥–µ ‚Äî –∏ –¥–ª—è –¥–µ–≤–µ–ª–æ–ø–º–µ–Ω—Ç–∞, –∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.
